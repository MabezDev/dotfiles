#!/bin/bash

i3_path="i3/.config/i3/"
zsh_path="zsh/.zsh_conf"

# merge i3 config with chosen
cat $i3_path/config.base > $i3_path/config

# run wal to generate the colour schemes
wal -i $HOME/.wallpapers/island-flow.png

# prepare dunst
mkdir -p .config/dunst/
dunst/.config/dunst/wal.sh

if [[ "$1" == "desktop" ]]; then
	echo "Deploying desktop configuration"
	cat $i3_path/config.desktop >> $i3_path/config
	cat $zsh_path/zshenv.desktop > zsh/.zshenv
elif [[ "$1" == "laptop" ]]; then
	echo "Deploying laptop configuration"
	cat $i3_path/config.laptop >> $i3_path/config
	cat $zsh_path/zshenv.laptop > zsh/.zshenv
else
	echo "Missing deploy type, either desktop or laptop"
	exit 1
fi


find . -maxdepth 1 -name "[!.]*" -type d -exec bash -c 'stow -R $(basename "$0")' {} \;